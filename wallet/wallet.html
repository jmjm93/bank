<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>eCoin Personal Wallet</title>

    <link rel="stylesheet" href="wallet.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>
<body>

    <ul class="article-list-vertical">

    </ul>

</body>
<script>
$.ajax
        ({
        type: "GET",
        url: "/fetchWallet",
        crossDomain:"true",
        }).done(function (data){
               /* var tableMaker = o => 
                        {
                        var keys = Object.keys(o[0]),
                        rowMaker = (a,t) => a.reduce((p,c,i,a) => p + (i === a.length-1 ? "<" + t + ">" + c + "</" + t + "></tr>"
                                                                                   : "<" + t + ">" + c + "</" + t + ">"),"<tr>"),
                        rows = o.reduce((r,c) => r + rowMaker(keys.reduce((v,k) => v.concat(c[k]),[]),"td"),rowMaker(keys,"th"));
                   return "<table>" + rows + "</table>";
                  };*/
		var html="";
		var i=0;
		data.forEach(function(element){
			html = html + "<li>\n<div><h2><a> Coin "+ i+"</a></h2>\n";
			html = html + "<p>Local identifier: " + element._id + "</p>\n";
			html = html + "<a onclick='getSignature(\""+element.signature+"\")' class='read-more'>Get signature &rarr;</a>";
			i++;
		});
        $('.article-list-vertical').append(html);
        });


function getSignature(signature)
	{
	console.log(signature);
    var dummy = document.createElement("input");
    //dummy.style.display = 'none'
    document.body.appendChild(dummy);
    //$(dummy).css('display','none');
    dummy.setAttribute("id", "dummy_id");
    //dummy.setAttribute('value', document.URL + '; ' + document.title)
    dummy.setAttribute('value', signature);
    //document.getElementById("dummy_id").value=val;
    dummy.select();
    document.execCommand("copy");
    document.body.removeChild(dummy);    
	}

</script>
</html>
